---
layout: post
title: "ATI显卡高清视频播放"
date: 2012-10-13 23:35
comments: true
tags:
 - Linux
 - HTPC
---
前一个月手痒没忍住，入了AMD的E350 APU平台，主板加电源加硬盘加机箱一共花了1K左右，作为一个30W多一点的HTPC+NAS解决方案感觉还是不错的。至于装配过程就没啥好说的了，就一块板子插上电源拧上螺丝。走线神码的，乃们自己去看chiphell上面那些大神耍帅吧。  
既然要作为NAS，显然跑Linux就是一个合理的选择了，不过地球人都知道Linux下的高清硬解神码的，跟Windows比就是战斗力只有5的渣渣啊。  
废话不多说，ATI的开源显卡驱动并不支持高清视频硬解，当然它可能在不久的将来到来，不过，你就翘着脖子等着吧。另外不要相信之前文章说高清视频播放开源驱动比闭源驱动开硬解资源占用要低。我如果用开源驱动只能勉强搞定720P。1080P。哦买噶。完全是幻灯片啊。  
闭源驱动搞得比较纠结，安装就按[Arch的官方wiki](https://wiki.archlinux.org/index.php/ATI_Catalyst) 来的。不过当真正开始硬解的时候有一点点小问题：  

smplayer：我使用官方源中的mplayer-vaapi极易崩溃。基本无法使用，如果使用mplayer2的话，则又不能开启硬解。所以虽然我也很喜欢smplayer但是……不给面子没办法……  
vlc: VLC则能够轻松搞定1080p重编码（CPU占用两个核心都稳定在50%），但是10BIT会出现大量色块，其中包括德艺双馨的波多野结衣的那个4G多的mp4文件。要搞定vlc的硬解，arch WIKI上的并不完整，还需要额外参考[VLC关于硬解的官方文档](http://wiki.videolan.org/VLC_VAAPI#ATI) 修改一下环境变量。具体文档说的挺清楚了不再赘述，不过你并不需要重新编译ffmpeg和vlc，也就是只需要添加好环境变量就好。我的所有视频中有两个REMUX的ts文件播放出来是黑屏莫名其妙。  
XBMC: XBMC与VLC类似，但是能搞定那两个REMUX的ts文件。另外我开始XBMC莫名其妙没有声音很是奇怪。  
总而言之，E350集成显卡的硬件加速也就算是恰好凑合能用吧。有兴趣的自己倒腾倒腾。我下一步开始配置transmission，samba和dnsmasq了。